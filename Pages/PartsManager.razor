@page "/partsmanager"
@using TurboKanban
@using TurboKanban.Data
@inject PartsService PartsSvc

<PageTitle>Parts Management</PageTitle>

<h1>Parts Manager</h1>

<h5>Parts Status (@parts.Count(p => !p.IsAccquired))</h5>

<ul>
    @foreach (var part in parts)
    {
            <li>
                <input type="checkbox" @bind="part.IsAccquired" />
                <input @bind="part.Title" />
            </li>
    }
</ul>

<input @bind="newPart" placeholder="Enter new part..." />
<button @onclick="AddPart">Add Part</button>

@code {
    private List<Parts> parts = new();
    private string newPart = "";

    protected override async Task OnInitializedAsync()
    {
        parts = await PartsSvc.GetPartsAsync(); // Load parts from service
    }

    void AddPart()
    {
        if (!string.IsNullOrWhiteSpace(newPart))
        {
            parts.Add(new Parts { Title = newPart, IsAccquired = false });
            newPart = string.Empty;
            StateHasChanged(); // Force UI refresh
        }
    }
}
